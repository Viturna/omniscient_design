<% return unless local_assigns.key?(:ad) && ad.present? %>
<% ad_id = ad.is_a?(Hash) ? ad[:id] : ad.id %>
<%= link_to partner_click_path(ad_id), target: "_blank", class: "partner-card-link" do %>
  <img src="<%= partner_impression_path(ad_id) %>" style="display:none;" alt="" aria-hidden="true" loading="eager">
  <div class="card partner-card">
    <div class="bg-card" style="background-color: #52525D;">
      <div class="bg-img-card card-slider-wrapper" 
           data-controller="slider" 
           data-slider-update-background-value="true">
        <div class="card-slider-blurred-bg" data-slider-target="background"></div>
        <div class="card-slider-slides">
          <picture>
            <source media="(max-width: 760px)" 
                    srcset="<%= ad.is_a?(Hash) ? ad[:image_mobile_url] : (ad.image_mobile.attached? ? url_for(ad.image_mobile) : url_for(ad.image)) %>">
            <source media="(min-width: 761px)" 
                    srcset="<%= ad.is_a?(Hash) ? ad[:image_desktop_url] : url_for(ad.image) %>">
            <img src="<%= ad.is_a?(Hash) ? ad[:image_desktop_url] : url_for(ad.image) %>" 
                 class="card-slide-image active" 
                 data-slider-target="slide"
                 alt="<%= ad.is_a?(Hash) ? ad[:title] : ad.title %>" />
          </picture>
        </div>
        <div class="flex-info-card partners">
          <div class="info-card-dark">
            <div class="small-circle" style="background-color: #FFF;"></div>
            Sponsorisé
          </div>
          <div class="info-card" style="background-color: #FFF; color: #202020;">
            En savoir plus →
          </div>
        </div>
      </div>
    </div>
    <div class="container-text-card">
      <p class="subtitle-card">
        Sponsorisé
      </p>
      <h2 class="title-card"><%= ad.is_a?(Hash) ? ad[:title] : ad.title %></h2>
      <p class="description-card description-card-home"><%= ad.is_a?(Hash) ? ad[:description] : (ad.respond_to?(:description) ? ad.description : "") %></p>
    </div>
  </div>
<% end %>